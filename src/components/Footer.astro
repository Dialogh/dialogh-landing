---
// Footer component with social links and accessible navigation
import { Image } from "astro:assets";
import Logo from "../assets/logo.svg";
import { Icon } from "astro-icon/components";
---

<footer role="contentinfo" aria-label="Site footer"
  class="min-h-[40dvh] sm:min-h-[50dvh] relative w-full rounded-2xl flex flex-col justify-between"
  style="background: linear-gradient(358.01deg, rgba(255, 252, 246, 0.9) 2.0%, rgba(0, 0, 0, 0) 89.55%);"
>
  <span class="uppercase hidden md:block text-[#6765631A] w-full md:text-[2vw] lg:text-[23vw] text-center">Dialogh</span>

  <div class="max-w-4xl w-full mx-auto flex flex-col text-base sm:text-lg lg:text-xl gap-8 sm:gap-12 justify-center px-4 py-10">
    <div class="flex items-start justify-between gap-6">
      <a href="/" class="flex items-center gap-3 text-[#000]/80" aria-label="Dialogh homepage">
        <Image src={Logo} alt="Dialogh logo" class="w-6 h-6 sm:w-8 sm:h-8" />
        <span class="font-medium text-lg sm:text-xl">dialogh</span>
      </a>

      <div class="flex items-center space-x-3">
        <a href="https://dsc.gg/dialogh" target="_blank" rel="noopener noreferrer" aria-label="Dialogh on Discord" class="text-[#000000] hover:text-[#000000] transition-colors">
          <Icon name="simple-icons:discord" class="w-5 h-5" />
        </a>
        <a href="https://www.instagram.com/dialogh.in/" target="_blank" rel="noopener noreferrer" aria-label="Dialogh on Instagram" class="text-[#000000] hover:text-[#000000] transition-colors">
          <Icon name="simple-icons:instagram" class="w-5 h-5" />
        </a>
        <a href="https://www.linkedin.com/company/dialogh-community/" target="_blank" rel="noopener noreferrer" aria-label="Dialogh on LinkedIn" class="text-[#000000] hover:text-[#000000] transition-colors">
          <Icon name="simple-icons:linkedin" class="w-5 h-5" />
        </a>
        <a href="mailto:dialogh-community@gmail.com" aria-label="Email Dialogh" class="text-[#000000] hover:text-[#000000] transition-colors">
          <Icon name="simple-icons:gmail" class="w-5 h-5" />
        </a>
      </div>
    </div>

    <nav aria-label="Footer navigation" class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-6">
      <ul class="flex text-black flex-col sm:flex-row gap-3 sm:gap-6 text-sm sm:text-base">
        <li><a href="/about" class="hover:underline">About</a></li>
        <li><a href="/events" class="hover:underline">Events</a></li>
        <li><a href="/community-guidelines" class="hover:underline">Community guidelines</a></li>
        <li><a href="/privacy" class="hover:underline">Privacy policy</a></li>
      </ul>

      <div class="flex text-black items-center gap-4">
        <a href="https://www.dialogh.in" class="text-sm text-center sm:text-right hover:underline">&copy; <span class="sr-only">Copyright</span> dialogh.in • <time datetime={new Date().getFullYear().toString()}>{new Date().getFullYear()}</time></a>
      </div>
    </nav>

    <div class="text-xs text-[#000000]/60 mt-2">
      <span>Built with <span aria-hidden="true">♥</span> by the Dialogh community.</span>
    </div>
  </div>

</footer>

<script type="module">
  document.addEventListener('DOMContentLoaded', () => {
    const btn = document.getElementById('back-to-top');
    if (btn) {
      btn.addEventListener('click', () => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });
    }
  });

  // Ensure external links opened via target="_blank" are safe
  document.addEventListener('astro:page-load', () => {
    document.querySelectorAll('a[target="_blank"]').forEach(a => {
      if (!a.rel.includes('noopener')) a.rel += ' noopener';
      if (!a.rel.includes('noreferrer')) a.rel += ' noreferrer';
    });
  });
</script>
